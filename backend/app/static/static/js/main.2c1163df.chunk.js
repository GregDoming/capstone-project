(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(22),o=n.n(r),i=(n(66),n(67),n(6)),l=n(18),s=n(8);n(72);function u(e){var t=e.children;return c.a.createElement("div",{className:"container"},t)}n(41);function m(e){var t=e.text,n=e.onClick,a=e.buttonType,r=void 0===a?"primary":a;return c.a.createElement("button",{className:"button button-".concat(r),onClick:n},t)}n(73);function d(e){var t=e.onSignUpClick,n=e.onSignInClick;return c.a.createElement("nav",{className:"navbar"},c.a.createElement(u,null,c.a.createElement("div",null,c.a.createElement("img",{className:"navbar-logo",src:"https://getcardify.com/assets/img/logos/icon/Icon_mono_positive.png",alt:""})),c.a.createElement("ul",{className:"navbar-items-list"},c.a.createElement("li",{className:"navbar-list-item"},c.a.createElement("a",{className:"navbar-list-link",href:"/"},"Videos")),c.a.createElement("li",{className:"navbar-list-item"},c.a.createElement(m,{buttonType:"primary",text:"Sign up",onClick:t})),c.a.createElement("li",{className:"navbar-list-item"},c.a.createElement(m,{buttonType:"outline",text:"Sign in",onClick:n})))))}var v=n(7);n(74);function p(e){var t=e.value,n=e.onChange,a=e.placeholder,r=e.icon,o=e.type,i=void 0===o?"text":o;return c.a.createElement("div",{className:"input-wrap"},r&&c.a.createElement("div",{className:"input-icon"},r),c.a.createElement("input",{type:i,className:"input",onChange:n,placeholder:a,value:t}))}var f=n(9);function b(e){var t=e.email,n=e.password,a=e.onEmailChange,r=e.onPasswordChange,o=e.onLoginClick,i=e.onDemoClick;return c.a.createElement("div",{className:"login-modal"},c.a.createElement("div",null,c.a.createElement(p,{icon:c.a.createElement(f.j,null),value:t,onChange:a,placeholder:"Email"}),c.a.createElement(p,{type:"password",icon:c.a.createElement(f.h,null),value:n,onChange:r,placeholder:"Password"})),c.a.createElement("div",{className:"login-modal-button-wrap"},c.a.createElement(m,{onClick:o,text:"Login"}),c.a.createElement(m,{onClick:i,text:"Demo"})))}var E=n(2),g=n.n(E),O=n(4),h=n(17),j=n.n(h),C=function(){return{type:"LOGIN_LOADING"}},k=function(e){return{type:"LOGIN_SUCCEEDED",user:e}},N=(n(93),n(54)),y=n(35),w=n(60),x=n(59),S=document.getElementById("portal"),_=function(e){Object(w.a)(n,e);var t=Object(x.a)(n);function n(){var e;return Object(N.a)(this,n),(e=t.call(this)).el=document.createElement("div"),e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){S.appendChild(this.el)}},{key:"componentWillUnmount",value:function(){S.removeChild(this.el)}}]),Object(y.a)(n,[{key:"render",value:function(){var e=this.props.children;return o.a.createPortal(e,this.el)}}]),n}(a.Component);n(94),n(95);function I(e){var t=e.icon,n=e.onClick,a=e.sizeInPx,r=void 0===a?50:a;return c.a.createElement("button",{style:{height:r,width:r},className:"icon-button",onClick:n},t)}function T(e){var t=e.children,n=e.onOutsideClick,a=e.onCloseClick;return c.a.createElement(_,null,c.a.createElement("div",{onClick:n,className:"fullscreen-modal"},c.a.createElement("div",{onClick:function(e){return e.stopPropagation()},className:"fullscreen-modal-content"},c.a.createElement("div",null,t),c.a.createElement(I,{className:"fullscreen-modal-close-icoxn",icon:c.a.createElement(f.f,null),sizeInPx:24,onClick:function(){a(),console.log("yeet")}}))))}var L=Object(i.b)((function(e){return{authenticated:e.user.authenticated}}),(function(e){return{login:function(t,n){return e(function(e,t){return function(){var n=Object(O.a)(g.a.mark((function n(a){var c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:"LOGIN_LOADING"}),n.prev=1,console.log(e,t),n.next=5,j.a.post("/api/session",{email:e,password:t});case 5:c=n.sent,a(k(c.data)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),a({type:"LOGIN_FAILED"});case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))((function(e){var t=e.login,n=e.authenticated,r=Object(a.useState)(""),o=Object(v.a)(r,2),i=o[0],l=o[1],u=Object(a.useState)(""),m=Object(v.a)(u,2),d=m[0],p=m[1];Object(s.g)(),Object(a.useEffect)((function(){n&&f()}),[n]);var f=function(){};return c.a.createElement("div",{className:"login-page"},c.a.createElement(b,{onPasswordChange:function(e){return function(e){p(e.target.value)}(e)},onEmailChange:function(e){return function(e){l(e.target.value)}(e)},onDemoClick:function(){t("demo@demo.com","password")},onLoginClick:function(){t(i.toLocaleLowerCase(),d)},email:i,password:d}))}));function V(e){e.onSignUpSuccess;var t=Object(a.useState)(""),n=Object(v.a)(t,2),r=n[0],o=n[1],l=Object(a.useState)(""),s=Object(v.a)(l,2),u=s[0],d=s[1],b=Object(a.useState)(""),E=Object(v.a)(b,2),h=E[0],C=E[1],N=Object(i.c)();return c.a.createElement("div",{className:"sign-up-container"},c.a.createElement(p,{placeholder:"Username",value:r,onChange:function(e){return o(e.target.value)},icon:c.a.createElement(f.j,null)}),c.a.createElement(p,{placeholder:"Email",value:h,onChange:function(e){return C(e.target.value)},icon:c.a.createElement(f.i,null)}),c.a.createElement(p,{type:"password",placeholder:"Password",value:u,onChange:function(e){return d(e.target.value)},icon:c.a.createElement(f.d,null)}),c.a.createElement(m,{text:"Sign up",onClick:function(){N(function(e,t,n){return function(){var a=Object(O.a)(g.a.mark((function a(c){var r;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("Hello"),a.next=3,j.a.post("/api/users/signup",{username:e,email:t,password:n});case 3:return r=a.sent,console.log(r),r.ok&&c(k(r.data.user)),a.abrupt("return",r);case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(r,h,u))}}))}n(97);function D(e){e.profileImg;var t=e.className;return c.a.createElement("img",{className:"user-profile ".concat(t),src:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=400&q=60",alt:""})}function M(e){var t=e.userImage,n=e.userId;return c.a.createElement("nav",{className:"navbar"},c.a.createElement(u,null,c.a.createElement("div",null,c.a.createElement("img",{className:"navbar-logo",src:"https://getcardify.com/assets/img/logos/icon/Icon_mono_positive.png",alt:""})),c.a.createElement("ul",{className:"navbar-items-list"},c.a.createElement("li",{className:"navbar-list-item"},c.a.createElement("a",{className:"navbar-list-link",href:"/"},"Videos")),c.a.createElement(l.b,{to:"/profile/".concat(n)},c.a.createElement(D,{className:"navbar-profile-img",img:t})))))}function P(){var e=Object(a.useState)(!1),t=Object(v.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(!1),l=Object(v.a)(o,2),s=l[0],u=l[1],m=Object(i.d)((function(e){return e.user})),p=m.authenticated,f=m.id,b=function(){r(!n)},E=function(){u(!s)};return p?c.a.createElement(M,{userId:f,userImage:"https://images.unsplash.com/photo-1541855492-581f618f69a0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"}):c.a.createElement("div",{className:"navbar-wrap"},c.a.createElement(d,{onSignInClick:b,onSignUpClick:E}),n&&c.a.createElement(T,{onOutsideClick:b,onCloseClick:b},c.a.createElement(L,null)),s&&c.a.createElement(T,{onOutsideClick:E,onCloseClick:function(){console.log("hello"),E()}},c.a.createElement(V,{onSignUpSuccess:function(){return u(!1)}})))}function G(e){var t=e.children;return c.a.createElement("div",null,c.a.createElement(P,null),t)}var A=n(55),R=n.n(A);function U(e){var t=e.width,n=void 0===t?30:t;return c.a.createElement("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},className:"loading-spinner-wrap"},c.a.createElement("img",{style:{width:n},className:"spinner",src:R.a,alt:""}))}n(98);function B(e){var t=e.hovered,n=e.background,a=e.text,r=e.onMouseEnter,o=e.onMouseLeave,i=e.id,s=e.user;return c.a.createElement("div",{onMouseEnter:r,onMouseLeave:o,className:"video-thumbnail"},c.a.createElement(l.b,{to:"/video/".concat(i)},c.a.createElement("div",{className:"video-thumbnail-img-wrap"},c.a.createElement("img",{className:"video-thumbnail-img",src:n,alt:""}),t&&c.a.createElement("div",{className:"video-thumbnail-popup-play"},c.a.createElement("div",null,c.a.createElement(f.e,{className:"video-thumbnail-popup-play-icon"})),c.a.createElement("div",{className:"video-thumbnail-popup-play-title"},"PLAY"))),c.a.createElement("div",{className:"video-thumbnail-text"},a),c.a.createElement("div",{className:"video-thumbnail-user"},"By ",s)))}function F(e){var t=e.video,n=t.thumbnail,r=t.title,o=t.link,i=t.id,l=t.user,s=Object(a.useState)(!1),u=Object(v.a)(s,2),m=u[0],d=u[1];return c.a.createElement(B,{id:i,hovered:m,onMouseLeave:function(){d(!1)},onMouseEnter:function(){d(!0)},user:l,link:o,text:r,background:n})}function J(e){var t=e.icon,n=e.text,a=e.onClick,r=e.buttonType,o=void 0===r?"primary":r;return c.a.createElement("button",{className:"button button-icon button-".concat(o),onClick:a},n,t)}function W(e){var t=e.text,n=e.onClick;return c.a.createElement("div",{className:"button-long-border"},c.a.createElement("div",{className:"button-border button-border-left"}),c.a.createElement("button",{className:"button-long-border-button-wrap",onClick:n},t,c.a.createElement(f.a,{className:"button-long-border-icon"})),c.a.createElement("div",{className:"button-border button-border-right"}))}n(99);function H(e){var t=e.videos,n=e.onViewMoreClick,a=e.sectionTitle;return c.a.createElement("div",{className:"video-section"},c.a.createElement("div",{className:"video-section-title"},a),c.a.createElement("div",{className:"video-section-videos"},t.map((function(e){return c.a.createElement(F,{key:e.id,video:e})}))),c.a.createElement("div",{className:"video-section-view-more"},c.a.createElement(W,{text:"View more",onClick:n})))}function q(){var e=Object(i.d)((function(e){return e.profile})).profile,t=Object(i.c)();return Object(a.useEffect)((function(){t(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/api/profile");case 2:return(n=e.sent).statusText&&t({type:"/profile/my",profile:n.data.profile}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),console.log(e),e?c.a.createElement("div",null,e.new_comments.length?c.a.createElement(H,{key:"Unseen comments",sectionTitle:"Unseen comments",videos:e.new_comments}):null,e.no_comments.length?c.a.createElement(H,{key:"Not Commented On",sectionTitle:"Not Commented on",videos:e.no_comments}):null,e.oldComments.length?c.a.createElement(H,{key:"Videos with Comments",sectionTitle:"Videos with comments",videos:e.oldComments}):null):c.a.createElement(U,null)}var z=function(e){return e.authenticated?c.a.createElement(c.a.Fragment,null,c.a.createElement(s.b,{path:"/profile/:id",exact:!0,component:q})):c.a.createElement(s.a,{to:"/"})},Q=n(21),Y=n(31),K=n(38),X=n(30),Z=n.n(X),$=n(17),ee=n(17),te=function(e){return{type:"ADD_COMMENT",comment:e}};n(117);function ne(e){var t=e.active,n=(e.ref,e.comment),a=e.timestamp,r=e.formatted_timestamp,o=e.username,i=e.onClick,l=e.id;return c.a.createElement("div",{style:t?{opacity:1,transition:"0.15s opacity linear"}:{opacity:.2,transition:"0.15s opacity linear"},className:"video-comment ".concat(t&&"video-comment-active"),onClick:function(e){return i({id:l,timestamp:a})}},c.a.createElement("div",{className:"video-comment-info"},c.a.createElement("div",null,c.a.createElement("div",{className:"video-comment-username"},o),c.a.createElement("div",{className:"video-comment-timestamp"},r))),t&&c.a.createElement("div",{className:"video-comment-comment"},n))}n(118);function ae(e){var t=e.value,n=e.placeholder,a=e.onChange;return c.a.createElement(c.a.Fragment,null,c.a.createElement("textarea",{onChange:function(e){return a(e)},className:"textarea",value:t,placeholder:n}))}n(119);function ce(e){var t=e.onCommentChange,n=e.onCommentSubmit,a=e.commentValue,r=e.placeholder,o=e.buttonText;return c.a.createElement("div",{className:"comment-modal"},c.a.createElement("div",{className:"comment-modal-user-text-wrap"},c.a.createElement(D,null),c.a.createElement("div",{className:"textarea-wrap"},c.a.createElement(ae,{placeholder:r,value:a,onChange:t}))),c.a.createElement(m,{onClick:n,text:o}))}n(120);var re=n(56),oe=n(57);function ie(e){var t=e.formStage,n=e.onTimestampedCommentClick,r=e.onGeneralCommentClick,o=e.onSelectTimestampClick,i=e.onBackClick,l=e.hasTimestamp,s=e.commentValue,u=e.video,m=(e.onCloseClick,e.onCommentSubmit),d=e.onCommentChange,v=Object(a.useRef)();return c.a.createElement("div",{className:"create-comment-modal"},1===t&&c.a.createElement("div",null,c.a.createElement("div",{className:"create-comment-modal-title"},"What type of comment?"),c.a.createElement("div",{className:"create-comment-modal-button-wrap"},c.a.createElement(J,{onClick:n,icon:c.a.createElement(re.a,null),text:"I want to make a specific comment"}),c.a.createElement(J,{onClick:r,icon:c.a.createElement(oe.a,null),text:"I want to make a general comment"}))),2===t&&l&&c.a.createElement("div",null,c.a.createElement("div",{className:"create-comment-modal-title"},"Select moment in video"),c.a.createElement(Z.a,{volume:0,width:"100%",ref:v,muted:!0,playing:!1,url:u.link,controls:!0}),c.a.createElement("div",{className:"create-comment-modal-button-wrap"},c.a.createElement(J,{onClick:i,text:"Back",icon:c.a.createElement(f.b,null)}),c.a.createElement(J,{onClick:function(){return o(v.current.getCurrentTime())},text:"Next",icon:c.a.createElement(f.c,null)}))),3===t&&c.a.createElement(ce,{buttonText:"Submit",onCommentSubmit:m,onCommentChange:function(e){return d(e)},commentValue:s}))}n(121);function le(e){var t,n=e.onOutsideClick,r=e.onCloseClick,o=e.onCommentSubmitClick,l=Object(a.useState)(1),s=Object(v.a)(l,2),u=s[0],m=s[1],d=Object(a.useState)(!1),p=Object(v.a)(d,2),f=p[0],b=p[1],E=Object(a.useState)(""),h=Object(v.a)(E,2),j=h[0],C=h[1],k=Object(a.useState)(0),N=Object(v.a)(k,2),y=N[0],w=N[1],x=Object(i.d)((function(e){return e.videos})),S=x.video,_=x.video.id,I=Object(i.d)((function(e){return e.user})).id,L=Object(i.c)(),V=function(){var e={title:"Comment",text:j,user_id:I,video_id:_};f&&Object.assign(e,{timestamp:y}),L(function(e){return console.log(e),function(){var t=Object(O.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.post("/api/comments",e);case 2:return(a=t.sent).statusText&&n(te(a.data.comment)),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))};return c.a.createElement(T,{onCloseClick:r,onOutsideClick:n},c.a.createElement(ie,(t={onCommentSubmit:V,commentValue:j,onBackClick:function(){m(f?u-1:1)},onSelectTimestampClick:function(e){return function(e){return m(u+1),w(0===e?1:e)}(e)},video:S,hasTimestamp:f,onGeneralCommentClick:function(){b(!1),m(3)},onTimestampedCommentClick:function(){b(!0),m(u+1)},formStage:u},Object(Q.a)(t,"onCommentSubmit",(function(){V(),o()})),Object(Q.a)(t,"onCommentChange",(function(e){return function(e){C(e.target.value)}(e)})),t))," ")}var se=n(39);function ue(){var e=Object(a.useRef)(null),t=Object(a.useState)(!1),n=Object(v.a)(t,2),r=n[0],o=n[1],l=Object(a.useState)([]),u=Object(v.a)(l,2),m=u[0],d=u[1],p=Object(a.useState)(0),b=Object(v.a)(p,2),E=b[0],h=b[1],j=Object(a.useState)(!1),C=Object(v.a)(j,2),k=C[0],N=C[1],y=Object(a.useState)(""),w=Object(v.a)(y,2),x=(w[0],w[1],Object(a.useState)(!1)),S=Object(v.a)(x,2),_=S[0],V=S[1],D=Object(a.useState)(!0),M=Object(v.a)(D,2),P=(M[0],M[1]),G=Object(i.c)(),A=Object(s.h)().id,R=Object(a.useRef)(!0),B=Object(a.useRef)(),F=Object(a.useRef)(),J=Object(i.d)((function(e){return e.video})),W=J.video,H=J.video,q=(H.link,H.created_at),z=H.total_views,X=H.user,te=H.description,ae=H.title,ce=H.categories,re=J.loading,oe=Object(i.d)((function(e){return e.user})),ie=(oe.id,oe.username,oe.authenticated),ue=Object(i.d)((function(e){return e.comments})),me=ue.comments,de=ue.loading;Object(a.useEffect)((function(){var e;G((e=A,function(){var t=Object(O.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"videos/loading"}),t.prev=1,t.next=4,$.get("/api/videos/single?id=".concat(e));case 4:a=t.sent,console.log(a),n({type:"/videos/single",video:a.data.video}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:"SET_VIDEO_ERROR"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}())),G(function(e){return function(){var t=Object(O.a)(g.a.mark((function t(n){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"LOADING_COMMENT"}),t.next=3,ee.get("/api/comments?id=".concat(e));case 3:return(a=t.sent).statusText&&n({type:"/comments/all",comments:a.data.comments}),t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(A))}),[]),Object(a.useEffect)((function(){if(null!==B.current&&B.current){for(var e=Object(K.a)(B.current.children).slice(0),t=Object(Y.a)(e),n=[],a=0;a<t.length;a++){Object(K.a)(t[a].classList).slice(0).includes("video-comment-active")&&n.push(t[a])}if(n.length>0){var c=n[0].offsetTop;B.current.scrollTop=c}}}),[m]);var ve=function(e){for(var t=[],n=0;n<me.length;n++)parseInt(me[n].timestamp)===e&&t.push(me[n].id);d(t)};var pe=function(){ie?(N(!k),o(!1)):V(!_)};Object(a.useEffect)((function(){R.current&&(R.current=!1)}),[]);var fe=function(){N(!1)};return c.a.createElement("div",{className:"video-player-page"},k&&c.a.createElement(le,Object(Q.a)({onCommentSubmitClick:fe,onCloseClick:fe},"onCloseClick",fe))," ",_&&c.a.createElement(T,{onOutsideClick:pe,onCloseClick:pe},c.a.createElement(L,null)),c.a.createElement("div",{className:"video-wrap"},de||re?c.a.createElement(U,{width:32}):c.a.createElement("div",null,c.a.createElement(Z.a,{onReady:function(){P(!1)},volume:0,width:"100%",progressInterval:1e3,onPlay:function(){o(!0),d([])},onEnded:function(){d([])},playing:r,muted:!0,ref:F,url:W.link,controls:!0,loop:!1,playsinline:!0,onProgress:function(e){return function(e){if(-1!==E){console.log(e);var t=Math.floor(e.playedSeconds);if(t!==E){h(t);for(var n=0;n<me.length;n++)if(me[n].timestamp===t)return o(!1),ve(t)}}}(e)},onPause:function(){e&&e.current&&e.current.getCurrentTime()}}),c.a.createElement("div",{className:"video-info"},c.a.createElement("div",{className:"video-info-upper"},c.a.createElement("div",{className:"video-info-user"},ae),c.a.createElement("div",null,c.a.createElement("span",{className:"video-info-views"},z," views"),c.a.createElement("span",null),c.a.createElement("span",{className:"video-info-createdAt"},Object(se.a)(q)))),c.a.createElement("div",{className:""},c.a.createElement("div",null,ce.length>0?ce.map((function(e){return c.a.createElement("p",null,e.title)})):null),c.a.createElement("div",{className:"video-info-user"},X),c.a.createElement("div",{className:"video-info-description"},te)),!re&&c.a.createElement(I,{onClick:pe,icon:c.a.createElement(f.g,null)})),c.a.createElement("div",{className:"video-comment-general-list"},me.map((function(e){var t=e.text,n=e.timestamp,a=e.comment_user,r=e.created_at;if(null===n)return console.log(t),c.a.createElement("div",{className:"video-comment-general"},c.a.createElement("div",{className:"video-comment-general-user"},a),c.a.createElement("div",{className:"video-comment-general-text"},t),c.a.createElement("div",{className:"video-comment-general-created-at"},Object(se.a)(r)))}))))),c.a.createElement("div",{ref:B,className:"video-comment-list"},de||re?c.a.createElement(U,null):me.map((function(e){var t=e.text,n=e.timestamp,a=e.id,r=e.comment_user,o=e.formatted_timestamp;if(null!==n)return c.a.createElement(ne,{key:a,id:a,active:m.includes(a),comment:t,timestamp:n,formatted_timestamp:o,username:r,onClick:function(e){return function(e){F.current.player.player.player.currentTime=e.timestamp,h(-1),d([e.id])}(e)}})}))))}function me(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e})).videos;console.log(t);var n=!1;return n=!(t.popularVideos&&t.recentVideos&&t.needVideos),Object(a.useEffect)((function(){e(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("api/videos/search_popular");case 2:return(n=e.sent).statusText&&t({type:"videos/popular",videos:n.data.videos}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/api/videos/by_recent");case 2:return(n=e.sent).statusText&&t({type:"videos/recent",videos:n.data.videos}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.get("/api/videos/by_need");case 2:return(n=e.sent).statusText&&t({type:"videos/by_need",videos:n.data.videos}),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),n?c.a.createElement(U,null):c.a.createElement("div",null,c.a.createElement(H,{key:"Popular Videos",sectionTitle:"Popular Videos",videos:t.popularVideos}),c.a.createElement(H,{key:"Recent Videos",sectionTitle:"Recent videos",videos:t.recentVideos}),c.a.createElement(H,{key:"Support these Videos",sectionTitle:"People that need your support",videos:t.needVideos}))}function de(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,null,c.a.createElement(s.b,{exact:!0,path:"/",component:me}),c.a.createElement(s.b,{exact:!0,path:"/dashboard/guest",component:me}),c.a.createElement(s.b,{exact:!0,path:"/login",component:L}),c.a.createElement(s.b,{exact:!0,path:"/video/:id",component:ue}),c.a.createElement(s.b,{path:"/profile/:id",exact:!0,component:q})))}var ve=Object(i.b)((function(e){return{userLoading:e.user.loading,userAuthenticated:e.user.authenticated}}),(function(e){return{authenticateUser:function(){return e(function(){var e=Object(O.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(C),e.prev=1,e.next=4,j.a.post("/api/session");case 4:n=e.sent,t(k(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"LOGIN_FAILED"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){e.authenticateUser;var t=e.userLoading;return e.userAuthenticated,t?c.a.createElement(U,null):c.a.createElement(l.a,null,c.a.createElement(G,null,c.a.createElement(s.d,null,c.a.createElement(de,null),c.a.createElement(z,null))))})),pe=n(20),fe=n(58),be=n(3),Ee={name:null,id:null,error:!1,loading:!1,authenticated:!1},ge={video:{},loading:!0,error:!1};n(17);var Oe={comments:[],loading:!0,error:!1};n(17);var he={videos:[],loading:!0};n(122);var je,Ce=Object(pe.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_LOADING":return Object(be.a)(Object(be.a)({},e),{},{loading:!0});case"LOGIN_FAILED":return Object(be.a)(Object(be.a)({},e),{},{loading:!1,error:!0});case"LOGIN_SUCCEEDED":return Object(be.a)(Object(be.a)({},e),{},{loading:!1,error:!1,authenticated:!0,username:t.user.user.username,id:t.user.user.id});default:return Object(be.a)({},e)}},videos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"videos/all":return Object(be.a)(Object(be.a)({},e),{},{videos:t.videos.slice(0,4),loading:!1});case"/videos/single":return Object(be.a)(Object(be.a)({},e),{},{video:t.video});case"videos/owner":return Object(be.a)(Object(be.a)({},e),{},{ownedVidoes:t.videos});case"videos/get_featured":return Object(be.a)(Object(be.a)({},e),{},{featuredVideos:t.videos});case"videos/loading":return Object(be.a)(Object(be.a)({},e),{},{loading:!0});case"videos/popular":return Object(be.a)(Object(be.a)({},e),{},{popularVideos:t.videos});case"videos/recent":return Object(be.a)(Object(be.a)({},e),{},{recentVideos:t.videos});case"videos/by_need":return Object(be.a)(Object(be.a)({},e),{},{needVideos:t.videos});default:return e}},categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/categories/all":return Object(be.a)(Object(be.a)({},e),{},{categories:t.categories});case"/get_by_category":return Object(be.a)(Object(be.a)({},e),{},{videos:t.videos});default:return e}},comments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/comments/add_comment":return Object(be.a)(Object(be.a)({},e),{},{comment:t.comment});case"LOADING_COMMENT":return Object(be.a)(Object(be.a)({},e),{},{error:!1,loading:!0});case"/comments/all":return Object(be.a)(Object(be.a)({},e),{},{loading:!1,comments:t.comments.sort((function(e,t){return e.timestamp-t.timestamp}))});case"ADD_COMMENT":return Object(be.a)(Object(be.a)({},e),{},{comments:[t.comment].concat(Object(Y.a)(e.comments)).sort((function(e,t){return e.timestamp<t.timestamp?-1:1}))});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/profile/my":return Object(be.a)(Object(be.a)({},e),{},{profile:t.profile});case"/profile/user":return Object(be.a)(Object(be.a)({},e),{},{userProfile:t.userProfile});default:return e}},video:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"/videos/single":return Object(be.a)(Object(be.a)({},e),{},{video:t.video,loading:!1,error:!1});case"SET_VIDEO_ERROR":return Object(be.a)(Object(be.a)({},e),{},{video:{},error:!0,loading:!1});case"SET_VIDEO_LOADING":return Object(be.a)(Object(be.a)({},e),{},{error:!1,loading:!0});default:return e}}});je=Object(pe.a)(fe.a);var ke,Ne=Object(pe.d)(Ce,ke,je);o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:Ne},c.a.createElement(ve,null))),document.getElementById("root"))},41:function(e,t,n){},55:function(e,t,n){e.exports=n.p+"static/media/loading-spinner.263ead23.svg"},61:function(e,t,n){e.exports=n(123)},66:function(e,t,n){},67:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[61,1,2]]]);
//# sourceMappingURL=main.2c1163df.chunk.js.map